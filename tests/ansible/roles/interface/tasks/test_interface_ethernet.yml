---
- name: Assign interface IP address
  connection: local
  hosts: localhost
  vars:
    a10_host: "10.48.17.32"
    a10_username: "admin"
    a10_password: "a10"
    a10_port: 443
    a10_protocol: "https"
  tasks:
    - name: Assign interface IP address
      a10_interface_ethernet:
        a10_host: "{{ a10_host }}"
        a10_username: "{{ a10_username }}"
        a10_password: "{{ a10_password }}"
        a10_port: "{{ a10_port }}"
        a10_protocol: "{{ a10_protocol }}"
        ip:
          dhcp: "true"
        ifnum: 1
        action: "enable"
      register: iface
    - assert:
        that:
          - "iface['ethernet']['ip']['dhcp'] == 1"
          - "iface['ethernet']['ifnum'] == 1"
          - "iface['ethernet']['action'] == 'enable'"
